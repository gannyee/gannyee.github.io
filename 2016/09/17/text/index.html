<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Nutch+MongoDB+ElasticSearch+Kibana��������� | gannyee&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ǰ�ԣ�

���½�������ͨ��Nutch��MongoDB��ElasticSearch��Kibana��������棬����Nutch������ҳ������ȡ��MongoDB���ڴ洢�������������ݣ�ElasticSearch������Index������Kibana�������󻯲鿴�������������岽�����£�

���û�����
ϵͳ">
<meta property="og:type" content="article">
<meta property="og:title" content="Nutch+MongoDB+ElasticSearch+Kibana���������">
<meta property="og:url" content="http://yoursite.com/2016/09/17/text/index.html">
<meta property="og:site_name" content="gannyee's Blog">
<meta property="og:description" content="ǰ�ԣ�

���½�������ͨ��Nutch��MongoDB��ElasticSearch��Kibana��������棬����Nutch������ҳ������ȡ��MongoDB���ڴ洢�������������ݣ�ElasticSearch������Index������Kibana�������󻯲鿴�������������岽�����£�

���û�����
ϵͳ">
<meta property="og:image" content="http://www.aossama.com/wp-content/uploads/2015/03/Post-538.png">
<meta property="og:image" content="http://img.blog.csdn.net/20160127234110647">
<meta property="og:image" content="http://img.blog.csdn.net/20160127233837852">
<meta property="og:image" content="http://img.blog.csdn.net/20160127233947509">
<meta property="og:updated_time" content="2016-09-16T16:03:32.568Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nutch+MongoDB+ElasticSearch+Kibana���������">
<meta name="twitter:description" content="ǰ�ԣ�

���½�������ͨ��Nutch��MongoDB��ElasticSearch��Kibana��������棬����Nutch������ҳ������ȡ��MongoDB���ڴ洢�������������ݣ�ElasticSearch������Index������Kibana�������󻯲鿴�������������岽�����£�

���û�����
ϵͳ">
<meta name="twitter:image" content="http://www.aossama.com/wp-content/uploads/2015/03/Post-538.png">
  
    <link rel="alternate" href="/atom.xml" title="gannyee&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">gannyee&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">成长在于积累，分享是种美德！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-text" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/17/text/" class="article-date">
  <time datetime="2016-09-16T16:01:38.126Z" itemprop="datePublished">2016-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Nutch/">Nutch</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Nutch+MongoDB+ElasticSearch+Kibana���������
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><h5><strong>ǰ�ԣ�</strong><p></p>
<blockquote>
<p>���½�������ͨ��Nutch��MongoDB��ElasticSearch��Kibana��������棬����Nutch������ҳ������ȡ��MongoDB���ڴ洢�������������ݣ�ElasticSearch������Index������Kibana�������󻯲鿴�������������岽�����£�</p>
</blockquote>
<p></p><h5><strong>���û�����</strong><p></p>
<p><strong>ϵͳ������Ubuntu 14.04</strong></p>
<p><strong>JDK�汾��jdk1.8.0_45</strong><br>ͨ��wget��ȡ���ذ�װ��:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$ wget https://www.reucon.com/cdn/java/jdk-8u45-linux-x64.tar.gz</div><div class="line">tar zxvf jdk-8u45-linux-x64.tar.gz</div></pre></td></tr></table></figure></p>
<p>��ѹ���õ�jdk1.8.0_45�����ļ��У��Ȳ鿴/usr/lib/·������û��jvm�����ļ��У���û�У����½�һ��jvm�ļ��У�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$ mkdir /usr/lib/jvm</div></pre></td></tr></table></figure>
<p>����ǰ��ѹ�õ���jdk1.8.0_45���Ƶ�/usr/lib/jvm�У�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$mv jdk1.8.0_45 /usr/lib/jvm</div></pre></td></tr></table></figure>
<p>����profile���û���������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$vim /etc/profile</div></pre></td></tr></table></figure></p>
<p>��profile��ĩβ�����������ݣ�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_45</div><div class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line">export PATH=$PATH:$JAVA_HOME/bin</div></pre></td></tr></table></figure>
<p>Ȼ��ʹ����������ʹ�û���������Ч��<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$source /etc/profile</div></pre></td></tr></table></figure></p>
<p>����Ϊֹ��JDK�Ͱ�װ�����ˡ��鿴JDK�İ汾��<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$java �Cversion</div><div class="line">java version &quot;1.8.0_45&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 1.8.0_45-b14)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode)</div></pre></td></tr></table></figure></p>
<p>����������û�гɹ���ʾ�汾��Ϣ�����п�����֮ǰ�Ĳ����������⣬����ϸ����֮ǰ�Ĳ�����</p>
<p><strong>Ant�汾��1.9.4</strong><br>ͨ��wget���ذ�װ��:<br><a href="https://archive.apache.org/dist/ant/binaries/binaries/apache-ant-1.9.4-bin.tar.gz" target="_blank" rel="external">https://archive.apache.org/dist/ant/binaries/binaries/apache-ant-1.9.4-bin.tar.gz</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$ wget https://archive.apache.org/dist/ant/binaries/binaries/apache-ant-1.9.4-bin.tar.gz</div></pre></td></tr></table></figure>
<p>��ѹ���ɵõ�apache-ant-1.9.6�����ļ��У������ƶ���/usr/local/ant�ļ����У�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$sudo tar -zvxf apache-ant-1.9.4-bin.tar.gz</div><div class="line">gannyee@ubuntu:~/download$sudo mkdir /usr/local/ant</div><div class="line">gannyee@ubuntu:~/download$mv apache-ant-1.9.4 /usr/local/ant</div></pre></td></tr></table></figure>
<p>����profile���û���������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$vim /etc/profile</div></pre></td></tr></table></figure></p>
<p>��profile�ļ�ĩβ�����������ݣ�<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export ANT_HOME=/usr/local/ant/apache-ant-1.9.4</div><div class="line">export PATH=$PATH:$ANT_HOME/bin</div></pre></td></tr></table></figure></p>
<p>ʹ����������ʹ�û���������Ч��</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$source /etc/profile</div></pre></td></tr></table></figure>
<p>�鿴Ant�汾��</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$ant -version</div><div class="line">Apache Ant(TM) version 1.9.4 compiled on April 29 2014</div></pre></td></tr></table></figure>
<p>���ˣ��������������Ļ���Ԥ���������ɣ�</p>
<p></p><h5><strong>������������ͼʾ��</strong><p></p>
<p>ͼƬ��Դ���ͣ�<a href="http://www.aossama.com/search-engine-with-apache-nutch-mongodb-and-elasticsearch/" target="_blank" rel="external">http://www.aossama.com/search-engine-with-apache-nutch-mongodb-and-elasticsearch/</a></p>
<p><img src="http://www.aossama.com/wp-content/uploads/2015/03/Post-538.png" alt="����дͼƬ����"></p>
<p></p><h5><strong>Mongodb���ء���װ������</strong><p></p>
<p>��Դ�ĵ����ݿ⣬Nosql���ݵ��ʹ���֮һ��<br>�汾��MongoDB-2.6.11<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$ wget https://fastdl.mongodb.org/src/mongodb-src-r2.6.11.tar.gz</div><div class="line">gannyee@ubuntu:~/download$ sudo tar -zxvf mongodb-src-r2.6.11.tar.gz</div><div class="line">gannyee@ubuntu:~/download$ mv mongodb-src-r2.6.11/ ../mongodb/</div><div class="line">gannyee@ubuntu:~$cd mongodb/</div><div class="line">gannyee@ubuntu:~/mongodb$ </div><div class="line">sudo mkdir log/ conf/ data/</div></pre></td></tr></table></figure></p>
<p>��2.6�濪ʼ,mongodbʹ��YAML-based�����ļ���ʽ���ο����������ÿ�����<a href="http://docs.mongodb.org/v2.6/reference/configuration-options/" target="_blank" rel="external">�����ҵ�</a>��</p>
<p>����se.yml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/mongodb$ vim conf/se.yml</div><div class="line">net:</div><div class="line">  port: 27017</div><div class="line">  bindIp: 127.0.0.1</div><div class="line">systemLog:</div><div class="line">  destination: file</div><div class="line">  path: &quot;/opt/mongodb/log/mongodb.log&quot;</div><div class="line">  logAppend: true</div><div class="line">processManagement:</div><div class="line">  fork: true</div><div class="line">  pidFilePath: &quot;/opt/mongodb/log/mongodb.pid&quot;</div><div class="line">storage:</div><div class="line">  dbPath: &quot;/opt/mongodb/data&quot;</div><div class="line">  directoryPerDB: true</div><div class="line">  smallFiles: true</div></pre></td></tr></table></figure>
<p> ����Mongodb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/mongodb$ ./bin/mongod -f conf/se.yml</div></pre></td></tr></table></figure>
<p> ����Mongodb�Լ���Mongodb�Ƿ������ɹ�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/mongodb$ ./bin/mongo</div><div class="line">MongoDB shell version: 2.6.11</div><div class="line">connecting to: test</div><div class="line">&gt; show dbs</div><div class="line">admin (empty)</div><div class="line">local 0.031GB</div><div class="line">&gt; exit</div><div class="line">bye</div></pre></td></tr></table></figure>
<p>�ر�Mongodb��</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;use admin</div><div class="line">&gt;db.shutdownServer()</div></pre></td></tr></table></figure>
<blockquote>
<p>��Ubuntuʹ��Mongodb��ͼ�λ������������ߣ��Ƽ�ʹ��robomongo<br>���ص�ַ��<br><a href="http://app.robomongo.org/files/linux/robomongo-0.8.5-x86_64.deb" target="_blank" rel="external">http://app.robomongo.org/files/linux/robomongo-0.8.5-x86_64.deb</a><br>ʹ��robomongo�������ݿ�<br>���ء���װrobomongo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/mongodb$ sudo wget http://app.robomongo.org/files/linux/robomongo-0.8.5-x86_64.deb</div><div class="line">gannyee@ubuntu:~/mongodb$sudo dpkg -i robomongo-0.8.5-x86_64.deb</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~$robomongo�Ϳ��Դ򿪿ͻ��ˡ�<br> ���������ӣ�ֻ��Ҫ����host��port���ɡ�<br> note���ҵ�һ�ΰ�װ�ɹ�������Ҳ�ɹ������ǿ������κ����ݡ�<br> �����취������ʹ��rootȨ�ް�װ���ɡ�<br> <strong>����������ͼ��ʾ��</strong><br> <img src="http://img.blog.csdn.net/20160127234110647" alt="����дͼƬ����"><br>������Ҫ�������ʵĻ�����Ҫ�����ļ��е�bindIp: 127.0.0.1��ΪbindIp: 0.0.0.0</p>
</blockquote>
<p>Ȼ���������������룺<a href="http://localhost:27017,���������������ݣ�˵���������Է��ʣ�" target="_blank" rel="external">http://localhost:27017,���������������ݣ�˵���������Է��ʣ�</a><br><strong>It looks like you are trying to access MongoDB over HTTP on the native driver port.</strong></p>
<blockquote>
<p>���������޷�ִ��./mongod�Ĵ���<br>�󲿷�����Ϊmongodb �����ڲ������رյ�������,mongod ����,�����������ϴ��޹��������ɵ�.<br><strong>���ν�����������:</strong></p>
<blockquote>
<p>ɾ�� mongod.lock �ļ�����־�ļ� mongodb.log.2016-1-26T06-55-20 ,�����б�Ҫ�� log��־ȫ��ɾ��<br>mongod –repair –dbpath /home/gannyee/mongodb/data/db / –repairpath  /home/gannyee/mongodb</p>
</blockquote>
</blockquote>
<p></p><h5><strong>ElasticSearch���ء���װ</strong><p></p>
<p>��Apache Lucene��ȡ�����ܵķֲ�ʽ�������档<br>�汾��ElastricSearch-1.4.4</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.4.4.tar.gz</div><div class="line">gannyee@ubuntu:~/download$tar -zxvf elasticsearch-1.4.4.tar.gz</div><div class="line">gannyee@ubuntu:~/download$ mv elasticsearch-1.4.4 ../elasticsearch </div><div class="line">gannyee@ubuntu:~$cd /elasticsearch</div></pre></td></tr></table></figure>
<p>�޸�config���ļ�elasticsearch.yml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/elasticsearch$ vim config/elasticsearch.yml</div><div class="line">......</div><div class="line">cluster.name: gannyee</div><div class="line">node.name: &quot;gannyee&quot;</div><div class="line">node.master: true</div><div class="line">node.data: true</div><div class="line">path.conf: /home/gannyee/elasticsearch/config</div><div class="line">path.data: /home/gannyee/elasticsearch/data</div><div class="line">http.enabled: true</div><div class="line">network.bind_host: 127.0.0.1</div><div class="line">network.publish_host: 127.0.0.1</div><div class="line">network.host: 127.0.0.1</div><div class="line">.......</div></pre></td></tr></table></figure>
<p> ��̨����ElasticSearch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/elasticsearch$ ./bin/elasticsearch -d</div></pre></td></tr></table></figure>
<p> ��ֹElasticSearch����<br>�رյ�һ�ڵ�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/elasticsearch$curl -XPOST </div><div class="line">http://localhost:9200/_cluster/nodes/_shutdown</div></pre></td></tr></table></figure>
<p>�رսڵ�BlrmMvBdSKiCeYGsiHijdg<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/elasticsearch$curl �CXPOST </div><div class="line">http://localhost:9200/_cluster/nodes/BlrmMvBdSKiCeYGsiHijdg/_shutdown</div></pre></td></tr></table></figure></p>
<p> �����Ƿ��ɹ�����ElasticSearch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/elasticsearch$ curl -XGET &apos;http://localhost:9200&apos;</div><div class="line">&#123;</div><div class="line">  &quot;status&quot; : 200,</div><div class="line">  &quot;name&quot; : &quot;gannyee&quot;,</div><div class="line">  &quot;cluster_name&quot; : &quot;gannyee&quot;,</div><div class="line">  &quot;version&quot; : &#123;</div><div class="line">    &quot;number&quot; : &quot;1.4.4&quot;,</div><div class="line">    &quot;build_hash&quot; : &quot;c88f77ffc81301dfa9dfd81ca2232f09588bd512&quot;,</div><div class="line">    &quot;build_timestamp&quot; : &quot;2015-02-19T13:05:36Z&quot;,</div><div class="line">    &quot;build_snapshot&quot; : false,</div><div class="line">    &quot;lucene_version&quot; : &quot;4.10.3&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>elasticsearch-head��һ��elasticsearch�ļ�Ⱥ�������ߣ�������ȫ��html5��д�Ķ�����ҳ������������ͨ�������������ɵ�es<br>��װ elasticsearch-head����</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/elasticsearch$ cd elasticsearch</div><div class="line">gannyee@ubuntu:~/elasticsearch$ ./bin/plugin -install mobz/elasticsearch-head</div></pre></td></tr></table></figure>
<p>��������elasticsearch<br>������������:<a href="http://localhost:9200/_plugin/head/" target="_blank" rel="external">http://localhost:9200/_plugin/head/</a><br>�������ұ���Щ��ť���磺node stats�� cluster nodes����Щ��ֱ������es������״̬��api�����ؽ���Ϊjson������ͼ��<br><img src="http://img.blog.csdn.net/20160127233837852" alt="����дͼƬ����"></p>
<p></p><h5><strong>Kibana���ء���װ</strong><p></p>
<p>���ڷ���������Elasticsearch�Ǳ����Ŀ�Դ������<br>�汾��kibana-4.0.1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$wget https://download.elasticsearch.org/kibana/kibana/kibana-4.0.1-linux-x64.tar.gz</div><div class="line">gannyee@ubuntu:~/download$ tar -zxvf /download kibana-4.0.1-linux-x64.tar.gz </div><div class="line">gannyee@ubuntu:~/download$mv kibana-4.0.1-linux-x64/ ../kibana/ </div><div class="line">gannyee@ubuntu:~/download$cd ../kibana/</div><div class="line">gannyee@ubuntu:~/kibana$ ./bin/kibana</div></pre></td></tr></table></figure>
<p> �������Ϳ���ͨ��<a href="http://127.0.0.1:5601�˿ڷ�����,������ͼ��ʾ��" target="_blank" rel="external">http://127.0.0.1:5601�˿ڷ�����,������ͼ��ʾ��</a><br><img src="http://img.blog.csdn.net/20160127233947509" alt="����дͼƬ����"></p>
<p></p><h5><strong>Apache Nutch ��װ�����롢���ã�</strong><p></p>
<p>��Lucene��չ���Ŀ�Դ�������棬��������ֻ��ʹ��nutch2.xϵ�У�1.xϵ�в�֧��MongoDB��������Mysql,Habase���ݿ⡣<br>�汾��apache-nutch-2.3.1</p>
<p>Nutch2.3���ء����롢����</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/download$  wget</div><div class="line">http://www.apache.org/dyn/closer.lua/nutch/2.3.1/apache-nutch-2.3.1-src.tar.gz</div><div class="line">gannyee@ubuntu:~/download$ tar -zxvf apache-nutch-2.3.1-src.tar.gz</div><div class="line">gannyee@ubuntu:~/download$  mv apache-nutch-2.3.1 ../nutch</div><div class="line">gannyee@ubuntu:~/download$ cd ../nutch</div><div class="line">gannyee@ubuntu:~/nutch$ export NUTCH_HOME=$(pwd)</div></pre></td></tr></table></figure>
<p>�޸�/conf/nutch-site.xmlʹMongodb��ΪGORA�Ĵ洢��Ԫ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/nutch/conf$ vim nutch-site.conf</div><div class="line">&lt;configuration&gt;</div><div class="line">  &lt;property&gt;</div><div class="line">    &lt;name&gt;storage.data.store.class&lt;/name&gt;</div><div class="line">    &lt;value&gt;org.apache.gora.mongodb.store.MongoStore&lt;/value&gt;</div><div class="line">    &lt;description&gt;Default class for storing data&lt;/description&gt;</div><div class="line">  &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<p>��/ivy/ivy.xml�ļ���ȡ�����沿�ֵ�ע��</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/nutch/conf$  vim $NUTCH_HOME/ivy/ivy.xml</div><div class="line">&lt;dependency org=&quot;org.apache.gora&quot; name=&quot;gora-mongodb&quot; rev=&quot;0.5&quot; conf=&quot;*-&gt;default&quot; /&gt;</div><div class="line">...</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>ȷ��MongoStore����ΪĬ�����ݴ洢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">gannyee@ubuntu:~/nutch$ vim conf/gora.properties</div><div class="line">/#######################</div><div class="line">/# MongoDBStore properties #</div><div class="line">/#######################</div><div class="line">gora.datastore.default=org.apache.gora.mongodb.store.MongoStore</div><div class="line">gora.mongodb.override_hadoop_configuration=false</div><div class="line">gora.mongodb.mapping.file=/gora-mongodb-mapping.xml</div><div class="line">gora.mongodb.servers=localhost:27017</div><div class="line">gora.mongodb.db=nutch</div><div class="line">``` </div><div class="line">��ʼ����nutch</div></pre></td></tr></table></figure>
<p>gannyee@ubuntu:~/nutch$ant runtime<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">�������������������´���</div></pre></td></tr></table></figure></p>
<p>Trying to override old definition of task javac<br>  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.</p>
<p>ivy-probe-antlib:</p>
<p>ivy-download:<br>  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.</p>
<p>Trying to override old definition of task javac<br>  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.</p>
<p>ivy-probe-antlib:</p>
<p>ivy-download:<br>  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">����Ϊȱ��lib���������취���£���ʵ�������ӣ���</div><div class="line">���� sonar-ant-task-2.1.jar�������� $NUTCH_HOME/lib Ŀ¼����</div><div class="line"></div><div class="line">�޸� $NUTCH_HOME/build.xml��������������</div></pre></td></tr></table></figure></p>
<!-- Define the Sonar task if this hasn't been done in a common script -->
<p> <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml"><br>  <classpath path="${ant.library.dir}"><br>  <classpath path="${mysql.library.dir}"><br>  <classpath><fileset dir="lib/" includes="sonar*.jar"></fileset></classpath><br> </classpath></classpath></taskdef><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> ���������ļ��������������ɵ��ļ���/nutch/runtime��</div><div class="line"></div><div class="line">����ȷ��nutch�Ѿ���ȷ�ر���������,�������£�</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$ ./bin/nutch<br> Usage: nutch COMMAND<br>where COMMAND is one of:<br> inject         inject new urls into the database<br> hostinject     creates or updates an existing host table from a text file<br> generate       generate new batches to fetch from crawl db<br> fetch          fetch URLs marked during generate<br> parse          parse URLs marked during fetch<br> updatedb       update web table after parsing<br> updatehostdb   update host table after parsing<br> readdb         read/dump records from page database<br> readhostdb     display entries from the hostDB<br> index          run the plugin-based indexer on parsed batches<br> elasticindex   run the elasticsearch indexer - DEPRECATED use the index command instead<br> solrindex      run the solr indexer on parsed batches - DEPRECATED use the index command instead<br> solrdedup      remove duplicates from solr<br> solrclean      remove HTTP 301 and 404 documents from solr - DEPRECATED use the clean command instead<br> clean          remove HTTP 301 and 404 documents and duplicates from indexing backends configured via plugins<br> parsechecker   check the parser for a given url<br> indexchecker   check the indexing filters for a given url<br> plugin         load a plugin and run one of its classes main()<br> nutchserver    run a (local) Nutch server on a user defined port<br> webapp         run a local Nutch web application<br> junit          runs the given JUnit test<br> or<br> CLASSNAME      run the class named CLASSNAME<br>Most commands print help when invoked w/o parameters.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">����������ȡ����</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~$ sudo vim /nutch/runtime/local/conf/nutch-site.xml</p>
<p>&lt; ?xml version=”1.0”?&gt;<br>&lt; ?xml-stylesheet type=”text/xsl” href=”configuration.xsl”?&gt;</p>
<!-- Put site-specific property overrides in this file. -->
<p><configuration><br>  <property><br>    <name>storage.data.store.class</name><br>    <value>org.apache.gora.mongodb.store.MongoStore</value><br>    <description>Default class for storing data</description><br>  </property></configuration></p>
  <property><br>    <name>http.agent.name</name><br>    <value>Hist Crawler</value><br>  </property>

  <property><br>    <name>plugin.includes</name><br>    <value>protocol-(httphttpclient)urlfilter-regexindex-(basicmore)query-(basicsiteurllang)indexer-elasticnutch-extensionpointsparse-(texthtmlmsexcelmswordmspowerpointpdf)summary-basicscoring-opicurlnormalizer-(passregexbasic)parse-(htmltikametatags)index-(basicanchormoremetadata)</value><br>  </property><br>  <property><br>    <name>elastic.host</name><br>    <value>localhost</value><br>  </property>

  <property><br>    <name>elastic.cluster</name><br>    <value>hist</value><br>  </property>

  <property><br>    <name>elastic.index</name><br>    <value>nutch</value><br>  </property>

  <property><br>    <name>parser.character.encoding.default</name><br>    <value>utf-8</value><br>  </property>

  <property><br>    <name>http.content.limit</name><br>    <value>6553600</value><br>  </property>

<p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;h5&gt;��ȡ�Լ���һ����ҳ</div><div class="line">����һ��URL�����б�</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~$ mkdir -p /nutch/runtime/local/urls<br>gannyee@ubuntu:~$ echo ‘<a href="http://www.aossama.com/" target="_blank" rel="external">http://www.aossama.com/</a>‘ &gt;/nutch/runtime/local/urls/seed.txt<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">�༭conf/regex-urlfilter.txt�ļ��������滻��������</div></pre></td></tr></table></figure></p>
<p>/# accept anything else<br>+.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ʹ����������ʽƥ������Ҫ��ȡ������</div></pre></td></tr></table></figure></p>
<p>+^<a href="http://([a-z0-9]*\.)*aossama.com/" target="_blank" rel="external">http://([a-z0-9]*\.)*aossama.com/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**��ʼ��crawldb**</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$  ./bin/nutch inject urls/<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**�� crawldb����urls**</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$  ./bin/nutch generate -topN 80<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">**��ȡ���ɵ�����urls**</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$ ./bin/nutch fetch -all<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**������ȡ��urls**</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$./ bin/nutch parse -all<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**����database���ݿ�**</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$  ./bin/nutch updatedb -all<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**����������urls**</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/nutch/runtime/local$ bin/nutch index -all<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">��ȡ��������ҳ��mongoDB������һ���µ����ݿ⣺nutch_1</div></pre></td></tr></table></figure></p>
<p>gannyee@ubuntu:~/mongodb$ ./bin/mongo<br>MongoDB shell version: 2.6.11<br>connecting to: test</p>
<blockquote>
<p>show dbs<br>admin    (empty)<br>local    0.031GB<br>nutch_1  0.031GB<br>test     (empty)<br>use nutch_1<br>switched to db nutch_1<br>show tables<br>system.indexes<br>webpage</p>
</blockquote>
<p>```<br>�������ݿ�����terminal����ָ������ͼ�ν�����ֱ�ӵ����鿴��</p>
<p>�ο����ͣ�<br>��1��<br><a href="http://www.aossama.com/search-engine-with-apache-nutch-mongodb-and-elasticsearch/" target="_blank" rel="external">http://www.aossama.com/search-engine-with-apache-nutch-mongodb-and-elasticsearch/</a><br>��2��<a href="http://www.micmiu.com/opensource/nutch/nutch2x-tutorial/" target="_blank" rel="external">http://www.micmiu.com/opensource/nutch/nutch2x-tutorial/</a><br>��3��<a href="http://www.jeepshoe.org/82645084.htm" target="_blank" rel="external">http://www.jeepshoe.org/82645084.htm</a><br>��4��<a href="http://yijiebuyi.com/blog/f2e849b336b4d27fbf91bc52735d7841.html" target="_blank" rel="external">http://yijiebuyi.com/blog/f2e849b336b4d27fbf91bc52735d7841.html</a></p>
</h5></h5></h5></h5></h5></h5></h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/17/text/" data-id="cit5yg504000194t56lbamavr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/09/17/Nutch+MongoDB+ElasticSearch+Kibana搭建搜索引擎/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Nutch+MongoDB+ElasticSearch+Kibana搭建搜索引擎
        
      </div>
    </a>
  
  
    <a href="/2016/09/16/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Nutch/">Nutch</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/09/17/Nutch+MongoDB+ElasticSearch+Kibana搭建搜索引擎/">Nutch+MongoDB+ElasticSearch+Kibana搭建搜索引擎</a>
          </li>
        
          <li>
            <a href="/2016/09/17/text/">Nutch+MongoDB+ElasticSearch+Kibana���������</a>
          </li>
        
          <li>
            <a href="/2016/09/16/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 gannyee<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>